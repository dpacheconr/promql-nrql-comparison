# Sample Fake SecretStore for demo/testing
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: fake-secret-data
  namespace: monitoring
data:
  demo-key: "demo-value"
  api-key: "fake-api-key-12345"
  database-password: "fake-db-password"

---
# Fake SecretStore using Kubernetes secrets as backend
# This is just for demonstration - in production you'd use AWS Secrets Manager, Vault, etc.
apiVersion: external-secrets.io/v1
kind: SecretStore
metadata:
  name: fake-secret-store
  namespace: monitoring
spec:
  provider:
    fake:
      data:
        - key: demo-key
          value: demo-value
          version: v1
        - key: api-key
          value: fake-api-key-12345
          version: v1
        - key: database/password
          value: fake-db-password
          version: v1

---
# Sample ExternalSecret using the fake store
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: demo-external-secret
  namespace: monitoring
spec:
  refreshInterval: 1m
  secretStoreRef:
    name: fake-secret-store
    kind: SecretStore
  target:
    name: demo-secret-from-external
    creationPolicy: Owner
  data:
    - secretKey: demo-key
      remoteRef:
        key: demo-key
    - secretKey: api-key
      remoteRef:
        key: api-key

---
# Another ExternalSecret in demo-apps namespace
apiVersion: external-secrets.io/v1
kind: SecretStore
metadata:
  name: demo-apps-secret-store
  namespace: demo-apps
spec:
  provider:
    fake:
      data:
        - key: app-secret
          value: my-app-secret-value
          version: v1
        - key: database-url
          value: postgresql://fake-host:5432/demo
          version: v1

---
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: app-secrets
  namespace: demo-apps
spec:
  refreshInterval: 30s
  secretStoreRef:
    name: demo-apps-secret-store
    kind: SecretStore
  target:
    name: app-secrets
    creationPolicy: Owner
  data:
    - secretKey: app-secret
      remoteRef:
        key: app-secret
    - secretKey: db-url
      remoteRef:
        key: database-url

---
# ClusterSecretStore example for cluster-wide secrets
apiVersion: external-secrets.io/v1
kind: ClusterSecretStore
metadata:
  name: cluster-fake-store
spec:
  provider:
    fake:
      data:
        - key: shared-secret
          value: cluster-wide-secret-value
          version: v1

---
# ExternalSecret using ClusterSecretStore
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: cluster-secret
  namespace: monitoring
spec:
  refreshInterval: 2m
  secretStoreRef:
    name: cluster-fake-store
    kind: ClusterSecretStore
  target:
    name: cluster-shared-secret
    creationPolicy: Owner
  data:
    - secretKey: shared
      remoteRef:
        key: shared-secret
